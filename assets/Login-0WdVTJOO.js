import{u as w,a as y,j as e,T as N,m as o,C as v,b as k,I as a,c as F,d as C,F as T,e as p,f as x,g as u,h,i as L,k as f,B as i,l as S,n as I,t as l,o as A,s as j}from"./index-CA5f885i.js";import{c as P,u as B}from"./vendor-Bkymfbaw.js";import{P as H}from"./PasswordInput-DrMSzk3_.js";const E="http://localhost:5000",D=A({identifier:j().min(1,{message:"Username or Email is required"}),password:j().min(1,{message:"Password is required"})});function q(){const[d,m]=P.useState(!1),n=B(),t=w({resolver:y(D),defaultValues:{identifier:"",password:""}});async function g(r){m(!0);try{const s=await I.post(`${E}/api/auth/login`,{identifier:r.identifier,password:r.password});if(s.data.token){localStorage.setItem("token",s.data.token);const c=JSON.parse(atob(s.data.token.split(".")[1])).is_admin;l.success("Welcome back, warrior! ðŸ’ª",{description:c?"Admin access granted!":"Ready to crush your workout goals?",duration:3e3,position:"top-center",action:{label:"Let's Go",onClick:()=>n(c?"/admin":"/dashboard")}}),await new Promise(b=>setTimeout(b,1500)),n(c?"/admin":"/dashboard")}}catch(s){console.error("Login error:",s),s.response?s.response.status===400?l.error("Access Denied!",{description:"Invalid username/email or password.",position:"top-center"}):l.error("Login Failed!",{description:s.response.data.message||"Server error.",position:"top-center"}):l.error("Connection Error",{description:"Server is resting. Try again later!",position:"top-center"}),t.resetField("password")}finally{m(!1)}}return e.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 z-0",children:[e.jsx("img",{src:"https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80",alt:"Gym background",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"})]}),e.jsx(N,{position:"top-center",richColors:!0,closeButton:!0,toastOptions:{classNames:{toast:"border-0 shadow-lg",title:"font-bold",description:"text-sm opacity-90",actionButton:"!bg-primary !text-primary-foreground"}}}),e.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"w-full max-w-md z-10",children:e.jsxs(v,{className:"w-full border-0 bg-background/90 backdrop-blur-md shadow-xl",children:[e.jsxs(k,{className:"space-y-1 text-center",children:[e.jsxs(o.div,{className:"flex justify-center items-center",initial:{scale:.8},animate:{scale:1},transition:{type:"spring",stiffness:200},children:[e.jsx(a.dumbbell,{}),e.jsx("span",{className:"ml-2 text-2xl font-bold bg-gradient-to-r from-primary to-primary/80 bg-clip-text text-transparent",children:"FitTrack Pro"})]}),e.jsx(F,{className:"text-2xl font-bold mt-4",children:"Welcome Back, Athlete!"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Log in to track your workouts and see your gains"})]}),e.jsxs(C,{children:[e.jsx(T,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(g),className:"space-y-4",children:[e.jsx(p,{control:t.control,name:"identifier",render:({field:r})=>e.jsxs(x,{children:[e.jsxs(u,{className:"flex items-center",children:[e.jsx(a.user,{className:"w-4 h-4 mr-2"}),"Username or Email"]}),e.jsx(h,{children:e.jsx(o.div,{whileHover:{scale:1.01},whileTap:{scale:.98},children:e.jsx(L,{placeholder:"yourname or your@email.com",autoComplete:"username",...r,className:"py-5"})})}),e.jsx(f,{className:"text-xs"})]})}),e.jsx(p,{control:t.control,name:"password",render:({field:r})=>e.jsxs(x,{children:[e.jsxs(u,{className:"flex items-center",children:[e.jsx(a.lock,{className:"w-4 h-4 mr-2"}),"Password"]}),e.jsx(h,{children:e.jsx(o.div,{whileHover:{scale:1.01},whileTap:{scale:.98},children:e.jsx(H,{placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",...r,className:"py-5"})})}),e.jsx(f,{className:"text-xs"})]})}),e.jsx(o.div,{whileHover:{scale:1.01},whileTap:{scale:.98},children:e.jsx(i,{type:"submit",className:"w-full py-6 text-lg font-bold bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary shadow-lg",disabled:d,children:d?e.jsxs(e.Fragment,{children:[e.jsx(a.spinner,{className:"mr-2 h-5 w-5 animate-spin"}),"Logging in..."]}):e.jsxs(e.Fragment,{children:[e.jsx(a.login,{className:"w-5 h-5 mr-2"}),"LET'S WORKOUT"]})})})]})}),e.jsxs("div",{className:"relative my-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background/90 px-2 text-muted-foreground",children:"Or continue with"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(i,{variant:"outline",className:"py-5",children:[e.jsx(a.google,{className:"w-5 h-5 mr-2"}),"Google"]}),e.jsxs(i,{variant:"outline",className:"py-5",children:[e.jsx(a.apple,{className:"w-5 h-5 mr-2"}),"Apple"]})]})]}),e.jsxs(S,{className:"flex flex-col gap-3",children:[e.jsx(i,{variant:"link",className:"text-sm text-muted-foreground hover:text-primary",onClick:()=>n("/reset-password"),children:e.jsx("a",{href:"/forgot-password",children:"Forgot Password?"})}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["New to FitTrack?"," ",e.jsx(i,{variant:"link",className:"p-0 h-auto text-primary font-bold",onClick:()=>n("/signup"),children:"Join the gains journey"})]})]})]})})]})}export{q as default};
//# sourceMappingURL=Login-0WdVTJOO.js.map
